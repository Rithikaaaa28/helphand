{% extends "base.html" %}

{% block title %}Post Task - HelpHand{% endblock %}

{% block content %}
<div class="max-w-2xl mx-auto">
    <div class="bg-white shadow rounded-lg">
        <div class="px-4 py-5 sm:p-6">
            <h3 class="text-lg leading-6 font-medium text-gray-900 mb-6">
                <i class="fas fa-plus-circle mr-2 text-blue-600"></i>Post a New Task
            </h3>

            <form method="POST" action="{{ url_for('main.post_task') }}" class="space-y-6">
                <div>
                    <label for="title" class="block text-sm font-medium text-gray-700">Task Title</label>
                    <input type="text" id="title" name="title" required
                           class="mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm"
                           placeholder="e.g., Help with grocery shopping">
                </div>

                <div>
                    <label for="description" class="block text-sm font-medium text-gray-700">Description</label>
                    <textarea id="description" name="description" rows="4" required
                              class="mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm"
                              placeholder="Describe what kind of help you need in detail..."></textarea>
                </div>

                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                    <div>
                        <label for="category" class="block text-sm font-medium text-gray-700">Category</label>
                        <select id="category" name="category"
                                class="mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm">
                            <option value="">Select category</option>
                            <option value="household">Household Tasks</option>
                            <option value="grocery">Grocery Shopping</option>
                            <option value="elderly_care">Elderly Care</option>
                            <option value="pet_care">Pet Care</option>
                            <option value="tutoring">Tutoring/Education</option>
                            <option value="transportation">Transportation</option>
                            <option value="technical">Technical Help</option>
                            <option value="other">Other</option>
                        </select>
                    </div>

                    <div>
                        <label for="urgency" class="block text-sm font-medium text-gray-700">Urgency</label>
                        <select id="urgency" name="urgency"
                                class="mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm">
                            <option value="low">Low - Can wait a few days</option>
                            <option value="medium" selected>Medium - Within 1-2 days</option>
                            <option value="high">High - Need help today</option>
                        </select>
                    </div>
                </div>

                <div>
                    <label for="pincode" class="block text-sm font-medium text-gray-700">Pincode</label>
                    <input type="text" id="pincode" name="pincode" value="{{ current_user.pincode or '' }}"
                           class="mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm"
                           placeholder="Your area pincode">
                </div>

                <!-- Commercial Features -->
                <div class="border-t pt-6">
                    <h4 class="text-md font-medium text-gray-900 mb-4">Commercial Options</h4>
                    
                    <div class="space-y-4">
                        <div class="flex items-center">
                            <input id="is_commercial" name="is_commercial" type="checkbox" onchange="toggleCommercialOptions()"
                                   class="h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded">
                            <label for="is_commercial" class="ml-2 block text-sm text-gray-900">
                                This is a paid task (Commercial Service)
                            </label>
                        </div>

                        <div id="commercial_options" class="hidden space-y-4 bg-blue-50 p-4 rounded-lg">
                            <div>
                                <label for="payment_amount" class="block text-sm font-medium text-gray-700">Payment Amount (â‚¹)</label>
                                <input type="number" id="payment_amount" name="payment_amount" min="0" step="0.01"
                                       class="mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm">
                                <p class="mt-1 text-xs text-gray-500">
                                    Platform fee (8%) will be added. Total cost will be displayed before confirmation.
                                </p>
                            </div>
                            
                            <div class="bg-white p-3 rounded border">
                                <h5 class="font-medium text-gray-800 mb-2">ðŸ’¼ Premium Benefits</h5>
                                <ul class="text-sm text-gray-600 space-y-1">
                                    <li>â€¢ Priority matching with top-rated volunteers</li>
                                    <li>â€¢ Guaranteed response within 2 hours</li>
                                    <li>â€¢ Enhanced volunteer verification</li>
                                    <li>â€¢ Full refund protection</li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="pt-6 border-t">
                    <div class="flex justify-end space-x-3">
                        <a href="{{ url_for('main.dashboard') }}" 
                           class="bg-white py-2 px-4 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500">
                            Cancel
                        </a>
                        <button type="submit" 
                                class="inline-flex justify-center py-2 px-4 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500">
                            Post Task
                        </button>
                    </div>
                </div>
            </form>
        </div>
    </div>
</div>

<script>
function toggleCommercialOptions() {
    const checkbox = document.getElementById('is_commercial');
    const options = document.getElementById('commercial_options');
    
    if (checkbox.checked) {
        options.classList.remove('hidden');
    } else {
        options.classList.add('hidden');
        document.getElementById('payment_amount').value = '';
    }
}
</script>
{% endblock %}